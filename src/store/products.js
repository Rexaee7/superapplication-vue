export default{
    state:{
        products:[
            {
              id: "1",
              title:"لپ تاپ لنووا",
              price: 28000000,
              discount: 10,
              finalPrice:(28000000*90)/100,
              stars: 4.3,
              category: "لپ تاپ",
              image: "./images/product/1.webp",
              brand:"len",
              comments:[
                {
                  id:"1",
                  title: "امیررضا رضائیان",
                  email:"rexaeeex@gmail.com",
                  text: "از خرید این محصول راضی بودم ، پیشنهاد میکنم "
                }
              ],
              sellCount:20,
            },
            {
              id: "2",
              title:"لپ تاپ دل",
              price: 19000000,
              discount: 20,
              finalPrice:(19000000*80)/100,
              stars: 4.1,
              category: "لپ تاپ",
              image: "./images/product/2.webp",
              brand:"del",
              comments:[
                {
                  id:"1",
                  title: "امیررضا رضائیان",
                  email:"rexaeeex@gmail.com",
                  text: "از خرید این محصول راضی بودم ، پیشنهاد میکنم "
                }
              ],
              sellCount:10,
            },
            {
              id: "3",
              title:"لپ تاپ ایسوس",
              price: 15000000,
              discount: 8,
              finalPrice:(15000000*92)/100,
              stars: 4.6,
              category: "لپ تاپ",
              image: "./images/product/3.webp",
              brand:"aus",
              comments:[
                {
                  id:"1",
                  title: "امیررضا رضائیان",
                  email:"rexaeeex@gmail.com",
                  text: "از خرید این محصول راضی بودم ، پیشنهاد میکنم "
                }
              ],
              sellCount:15,
            },
            {
              id: "4",
              title:"لپ تاپ سرفیس",
              price: 43000000,
              discount: 23,
              finalPrice:(43000000*87)/100,
              stars: 4.0,
              category: "لپ تاپ",
              image: "./images/product/4.webp",
              brand:"mir",
              comments:[
                {
                  id:"1",
                  title: "امیررضا رضائیان",
                  email:"rexaeeex@gmail.com",
                  text: "از خرید این محصول راضی بودم ، پیشنهاد میکنم "
                }
              ],
              sellCount:4,
            },
            {
              id: "5",
              title:"لپ تاپ مکبوک",
              price: 31000000,
              discount: 3,
              finalPrice:(31000000*97)/100,
              stars: 3.8,
              category: "لپ تاپ",
              image: "./images/product/5.webp",
              brand:"app",
              comments:[
                {
                  id:"1",
                  title: "امیررضا رضائیان",
                  email:"rexaeeex@gmail.com",
                  text: "از خرید این محصول راضی بودم ، پیشنهاد میکنم "
                }
              ],
              sellCount:26,
            },
            {
              id: "6",
              title:"لپ تاپ ویووبوک",
              price: 22000000,
              discount: 4,
              finalPrice:(22000000*96)/100,
              stars: 4.8,
              category: "لپ تاپ",
              image: "./images/product/6.webp",
              brand:"hp",
              comments:[
                {
                  id:"1",
                  title: "امیررضا رضائیان",
                  email:"rexaeeex@gmail.com",
                  text: "از خرید این محصول راضی بودم ، پیشنهاد میکنم "
                }
              ],
              sellCount:8,
            },
            {
              id: "7",
              title:"آیفون 16",
              price: 86000000,
              discount: 2,
              finalPrice:(86000000*98)/100,
              stars: 4.3,
              category: "موبایل",
              image: "./images/product/7.webp",
              brand:"app",
              comments:[
                {
                  id:"1",
                  title: "امیررضا رضائیان",
                  email:"rexaeeex@gmail.com",
                  text: "از خرید این محصول راضی بودم ، پیشنهاد میکنم "
                }
              ],
              sellCount:21,
            },
            {
              id: "8",
              title:"ردمی نوت 13",
              price: 25000000,
              discount: 1,
              finalPrice:(25000000*99)/100,
              stars: 4.7,
              category: "موبایل",
              image: "./images/product/8.webp",
              brand:"xia",
              comments:[
                {
                  id:"1",
                  title: "امیررضا رضائیان",
                  email:"rexaeeex@gmail.com",
                  text: "از خرید این محصول راضی بودم ، پیشنهاد میکنم "
                }
              ],
              sellCount:33,
            },
            {
              id: "9",
              title:"گلکسی آ 55",
              price: 28000000,
              discount: 2,
              finalPrice:(28000000*98)/100,
              stars: 4.5,
              category: "موبایل",
              image: "./images/product/9.webp",
              brand:"sam",
              comments:[
                {
                  id:"1",
                  title: "امیررضا رضائیان",
                  email:"rexaeeex@gmail.com",
                  text: "از خرید این محصول راضی بودم ، پیشنهاد میکنم "
                }
              ],
              sellCount:45,
            },
            {
              id: "10",
              title:"ردمی نوت 14",
              price: 15000000,
              discount: 15,
              finalPrice:(15000000*85)/100,
              stars: 4.7,
              category: "موبایل",
              image: "./images/product/10.jpg",
              brand:"xia",
              comments:[
                {
                  id:"1",
                  title: "امیررضا رضائیان",
                  email:"rexaeeex@gmail.com",
                  text: "از خرید این محصول راضی بودم ، پیشنهاد میکنم "
                }
              ],
              sellCount:12,
            },
            {
              id: "11",
              title:"نوکیا فلیپ",
              price: 10000000,
              discount: 1,
              finalPrice:(10000000*99)/100,
              stars: 4.1,
              category: "موبایل",
              image: "./images/product/11.webp",
              brand:"nok",
              comments:[
                {
                  id:"1",
                  title: "امیررضا رضائیان",
                  email:"rexaeeex@gmail.com",
                  text: "از خرید این محصول راضی بودم ، پیشنهاد میکنم "
                }
              ],
              sellCount:36,
            },
            {
              id: "12",
              title:"داریا بوند",
              price: 13000000,
              discount: 3,
              finalPrice:(13000000*97)/100,
              stars: 3.7,
              category: "موبایل",
              image: "./images/product/12.webp",
              brand:"dar",
              comments:[
                {
                  id:"1",
                  title: "امیررضا رضائیان",
                  email:"rexaeeex@gmail.com",
                  text: "از خرید این محصول راضی بودم ، پیشنهاد میکنم "
                }
              ],
              sellCount:3,
            },
            {
                id: "13",
                title:"تبلت ۱۱ اینچ شیائومی",
                price: 14669000,
                discount: 1,
                finalPrice:(13000000*99)/100,
                stars: 3.9,
                category: "تبلت",
                image: "./images/product/13.webp",
                brand:"xia",
                comments:[
                  {
                    id:"1",
                    title: "امیررضا رضائیان",
                    email:"rexaeeex@gmail.com",
                    text: "از خرید این محصول راضی بودم ، پیشنهاد میکنم "
                  }
                ],
                sellCount:69,
              },
              {
                id: "14",
                title:"تبلت ۸.۷ اینچ سامسونگ ",
                price: 9420000,
                discount: 4,
                finalPrice:(9420000*96)/100,
                stars: 4.3,
                category: "تبلت",
                image: "./images/product/14.webp",
                brand:"sam",
                comments:[
                  {
                    id:"1",
                    title: "امیررضا رضائیان",
                    email:"rexaeeex@gmail.com",
                    text: "از خرید این محصول راضی بودم ، پیشنهاد میکنم "
                  }
                ],
                sellCount:16,
              },
              {
                id: "15",
                title:"تبلت 11 اینچ سامسونگ",
                price: 32000000,
                discount: 3,
                finalPrice:(32000000*97)/100,
                stars: 4.8,
                category: "تبلت",
                image: "./images/product/15.webp",
                brand:"sam",
                comments:[
                  {
                    id:"1",
                    title: "امیررضا رضائیان",
                    email:"rexaeeex@gmail.com",
                    text: "از خرید این محصول راضی بودم ، پیشنهاد میکنم "
                  }
                ],
                sellCount:24,
              },
              {
                id: "16",
                title:"iPad 2022 ",
                price: 26630000,
                discount: 3,
                finalPrice:(26630000*97)/100,
                stars: 3.7,
                category: "تبلت",
                image: "./images/product/16.webp",
                brand:"app",
                comments:[
                  {
                    id:"1",
                    title: "امیررضا رضائیان",
                    email:"rexaeeex@gmail.com",
                    text: "از خرید این محصول راضی بودم ، پیشنهاد میکنم "
                  }
                ],
                sellCount:8,
              },
              {
                id: "17",
                title:"تبلت مایکروسافت ",
                price: 94000000,
                discount: 5,
                finalPrice:(13000000*95)/100,
                stars: 4.9,
                category: "تبلت",
                image: "./images/product/17.webp",
                brand:"mir",
                comments:[
                  {
                    id:"1",
                    title: "امیررضا رضائیان",
                    email:"rexaeeex@gmail.com",
                    text: "از خرید این محصول راضی بودم ، پیشنهاد میکنم "
                  }
                ],
                sellCount:3,
              },
              {
                id: "18",
                title:"تبلت 8.7 اینچ سامسونگ",
                price: 17190000,
                discount: 2,
                finalPrice:(17190000*98)/100,
                stars: 3.7,
                category: "تبلت",
                image: "./images/product/18.webp",
                brand:"sam",
                comments:[
                  {
                    id:"1",
                    title: "امیررضا رضائیان",
                    email:"rexaeeex@gmail.com",
                    text: "از خرید این محصول راضی بودم ، پیشنهاد میکنم "
                  }
                ],
                sellCount:43,
              },
              {
                id: "19",
                title:"هدفون بلوتوثی انکر ",
                price: 1280000,
                discount: 3,
                finalPrice:(1280000*97)/100,
                stars: 4.5,
                category: "هدفون",
                image: "./images/product/19.webp",
                brand:"ank",
                comments:[
                  {
                    id:"1",
                    title: "امیررضا رضائیان",
                    email:"rexaeeex@gmail.com",
                    text: "از خرید این محصول راضی بودم ، پیشنهاد میکنم "
                  }
                ],
                sellCount:80,
              },
              {
                id: "20",
                title:"هدفون بلوتوثی ریمیکس ",
                price: 2000000,
                discount: 10,
                finalPrice:(2000000*90)/100,
                stars: 3.8,
                category: "هدفون",
                image: "./images/product/20.webp",
                brand:"rem",
                comments:[
                  {
                    id:"1",
                    title: "امیررضا رضائیان",
                    email:"rexaeeex@gmail.com",
                    text: "از خرید این محصول راضی بودم ، پیشنهاد میکنم "
                  }
                ],
                sellCount:11,
              },
              {
                id: "21",
                title:"هدفون بلوتوثی اپل ",
                price: 16000000,
                discount: 1,
                finalPrice:(16000000*99)/100,
                stars: 3.7,
                category: "هدفون",
                image: "./images/product/21.webp",
                brand:"app",
                comments:[
                  {
                    id:"1",
                    title: "امیررضا رضائیان",
                    email:"rexaeeex@gmail.com",
                    text: "از خرید این محصول راضی بودم ، پیشنهاد میکنم "
                  }
                ],
                sellCount:15,
              },
              {
                id: "22",
                title:"هدفون بلوتوثی لوکسار ",
                price: 1380000,
                discount: 5,
                finalPrice:(1380000*95)/100,
                stars: 4.6,
                category: "هدفون",
                image: "./images/product/22.webp",
                brand:"lux",
                comments:[
                  {
                    id:"1",
                    title: "امیررضا رضائیان",
                    email:"rexaeeex@gmail.com",
                    text: "از خرید این محصول راضی بودم ، پیشنهاد میکنم "
                  }
                ],
                sellCount:30,
              },
              {
                id: "23",
                title:"هدفون مخصوص بازی ",
                price: 2000000,
                discount: 9,
                finalPrice:(2000000*91)/100,
                stars: 3.7,
                category: "هدفون",
                image: "./images/product/23.webp",
                brand:"gam",
                comments:[
                  {
                    id:"1",
                    title: "امیررضا رضائیان",
                    email:"rexaeeex@gmail.com",
                    text: "از خرید این محصول راضی بودم ، پیشنهاد میکنم "
                  }
                ],
                sellCount:19,
              },
              {
                id: "24",
                title:"هدفون بلوتوثی کیوسی‌وای ",
                price: 1280000,
                discount: 3,
                finalPrice:(1280000*97)/100,
                stars: 4.8,
                category: "هدفون",
                image: "./images/product/24.webp",
                brand:"qcy",
                comments:[
                  {
                    id:"1",
                    title: "امیررضا رضائیان",
                    email:"rexaeeex@gmail.com",
                    text: "از خرید این محصول راضی بودم ، پیشنهاد میکنم "
                  }
                ],
                sellCount:67,
              },
              
          ],
    },
    getters:{
          showProduct : (state) => (id) =>{
            return state.products.find(f => f.id === id);
          },
          allProduc: (state) =>  state.products,
          filterProduct: (state , getters) => (q,filter,brand,priceTo,priceFrom,sort) => {
            var newProducts =[];
            var filtered = [];
            var sorted = [];
            var final=[];
            var finalSorted=[];
            if(q){
              console.log(q);
                newProducts = getters.allProduc.filter(p => 
                p.title.toLowerCase().includes(q));
            }
            else{
                newProducts = getters.allProduc
            }

            if(filter){
                if(filter == "all"){
                    filtered = newProducts
                }
                
                if(filter == "laptop"){
                    filtered = [...newProducts].filter(f => f.category == "لپ تاپ");
                  }
                  
                  if(filter == "mobile"){
                    filtered = [...newProducts].filter(f => f.category == "موبایل");
                  }
                  
                  if(filter == "tablet"){
                    filtered = [...newProducts].filter(f => f.category == "تبلت");
                  }
                  
                  if(filter == "headphone"){
                    filtered = [...newProducts].filter(f => f.category == "هدفون");
                  }
            }
            else{
                filtered = newProducts
            }

            if(brand){
                sorted = [...filtered].filter(f => f.brand == brand);
            }else{
                sorted = filtered
            }


            if(priceTo == 0 && priceFrom == 0){
                final = sorted
            }else{
                final = [...sorted].filter(f => f.finalPrice > priceFrom && f.finalPrice <= priceTo);
            }

            if(sort){
                if(sort == "expensive" || sort == "cheap"){
                    finalSorted = [...final].sort((a, b) => a.finalPrice - b.finalPrice);
                    if(sort == "expensive"){
                        finalSorted = [...finalSorted].reverse();
                    }
                  }

                  if(sort == "discount"){
                    finalSorted = [...final].sort((a, b) => a.discount - b.discount);
                    finalSorted = [...finalSorted].reverse();
                  }

                  if(sort == "mostsell"){
                    finalSorted = [...final].sort((a, b) => a.mostsell - b.mostsell);
                    finalSorted = [...finalSorted].reverse();
                  }

                  if(sort == "moststar"){
                    finalSorted = [...final].sort((a, b) => a.stars - b.stars);
                    finalSorted = [...finalSorted].reverse();
                  }


            }else{
                final = [...final].sort((a, b) => a.id - b.id);
                finalSorted = final.reverse()
            }
            
            return finalSorted

           },
           removeProduct:(state,getters) => (id) =>{
            state.products = getters.allProduc.filter(f => f.id != id)
    
            return "done";
        },
    },
    mutations:{
      addComment(state , comment){
        const product = state.products.find(f => f.id === comment.id);

        product.comments.push(comment);

    },
    editProduct(state, updatedItem) {
      const index = state.products.findIndex(item => item.id === updatedItem.id);
      if (index !== -1) {
        state.products.splice(index, 1, { ...state.products[index], ...updatedItem });
      }
    }
    },
    actions:{}
}